/** coolay-v1.0.0 MIT License By https://github.com/ninggf/coolayui */
 ;layui.define(["&coolay","jquery","@backend.module"],function(t){"use strict";var n=layui.$;layui["&coolay"];t("@backend.index",{init:function(t,e){new Vue({el:"#index",data:{menu:{show:0,listshow:0,search_focus:0,module_show:0,collection_list:[],menu_list:t,res_list:{title:"搜索结果",lists:[]},current_menu:-1},mod:e,drop:{start:"",target:"",current:-1},ajax:{error:0,success:0},search:{search_val:"",t:"",res:[]}},methods:{collection:function(e){var t;e.isadd?(t=this.menu.collection_list.findIndex(function(t){return t.name==e.name}),this.menu.collection_list.splice(t,1)):this.menu.collection_list.push(e),e.isadd=!e.isadd},dragstart:function(t){this.drop.start=t},dragend:function(){var t,e,s=this;this.drop.start.name!=this.drop.target.name&&(t=this.menu.collection_list.findIndex(function(t){return t.name==s.drop.start.name}),e=this.menu.collection_list.findIndex(function(t){return t.name==s.drop.target.name}),this.menu.collection_list.splice(t,1,this.drop.target),this.menu.collection_list.splice(e,1,this.drop.start),this.drop.current=-1)},dragenter:function(e){this.drop.current=this.menu.collection_list.findIndex(function(t){return t.name==e.name}),this.drop.target=e},clickMenu:function(t){this.getHtml(t),this.menu.show=this.menu.listshow=this.mod.mod_show=this.mod.sid_show=this.mod.hide_sid=0},searchMenu:function(t){var n=this;n.search.search_val?(n.search.t&&(window.clearTimeout(n.search.t),n.search.t=0),n.search.t=setTimeout(function(){n.search.t=0,n.search.res=[],n.search.res=n.menu.menu_list.map(function(t,e,s){return s=t.lists.filter(function(t){return t.name.includes(n.search.search_val)}),{title:t.title,lists:s}}),n.search.res=n.search.res.filter(function(t){return t.lists.length})},800)):n.search.res=[]},getHtml:function(t){var s=this;history.pushState({comp:t},t.url,t.url),n.ajax({url:t.url,method:"GET",timeout:5e3,beforeSend:function(t){t.setRequestHeader("PJAX","1"),s.ajax.error=0,s.ajax.success=0,n(".layui-progress").show(),layui.element.progress("install-progress","0")},success:function(t){n("#workspace .view").html(t),layui.element.progress("install-progress","100%")},complete:function(t,e){setTimeout(function(){layui.element.progress("install-progress","0"),n(".layui-progress").hide(),s.ajax.error=0},2e3)},error:function(t){n("#workspace .view").html(t.responseText),layui.element.progress("install-progress","100%"),setTimeout(function(){s.ajax.error=1},500)},dataType:"html"})},goHome:function(){this.getHtml({url:"/backend"}),this.mod.mod_show=1,this.mod.sid_show=this.mod.hide_sid=0}},mounted:function(){var e=this;history.pushState({comp:{url:location.pathname}},location.pathname,location.pathname),window.onpopstate=function(t){t.state&&("/backend"==t.state.comp.url?e.mod.mod_show=1:e.mod.mod_show=0,e.getHtml(t.state.comp))}}})}})});