function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}layui.define(['layer','table','util','admin','notice'],function(exports){var $=layui.jquery;var layer=layui.layer;var table=layui.table;var admin=layui.admin;var notice=layui.notice;var Grant=/*#__PURE__*/function(){function Grant(){_defineProperty(this,"grantListTable",void 0);_defineProperty(this,"insXmSel",void 0);_defineProperty(this,"selRid",void 0);}var _proto=Grant.prototype;_proto.init=function init(){this.selRid=$('#saveBtn').data('rid');this.grantListTable=table.render({id:'grantList',url:admin.url('backend/role/grant-list'),where:{rid:this.selRid},treeDefaultClose:false,treeLinkage:false,elem:'#grantTable',defaultToolbar:[],cellMinWidth:100,page:false,cols:[[{field:'name',title:'名称',width:180,sort:false,templet:function templet(d){var space=['','&emsp;','&emsp;&emsp;'];return space[d.level]+d.name;}},{field:'op',title:'权限',sort:false,templet:function templet(d){var html='';var op;var topResId;for(op in d.ops){var resId=d.ops[op]['resId'];if(op==='r'){topResId=resId;}html+='<input data-level="'+d.level+'" class="authCheckbox '+topResId+'" '+d.ops[op]['checkbox']+' type="checkbox" title='+d.ops[op]['name']+' name="grant" value="'+resId+'" > &nbsp;';}return html;}}]],done:function done(e){var checkbox=$('.authCheckbox').siblings('div.layui-form-checkbox');checkbox.css('height','24px');checkbox.css('line-height','24px');checkbox.children('span').css('font-size','12px');checkbox.children('span').css('padding','0 6px');checkbox.children('i').css('height','24px');}});};//保存
_proto.save=function save(){var obj=$('.authCheckbox');var grant=[];obj.each(function(){if($(this).next('div.layui-form-checkbox').hasClass('layui-form-checked')){grant.push($(this).val());}});if(grant.length>0){var loadIndex=layer.load(2);admin.post(admin.url('backend/role/grant-save'),{'rid':this.selRid,'grants':grant}).then(function(data){layer.close(loadIndex);if(data.code===200){notice.success('保存成功');setTimeout(function(){admin.closeThisTabs();},2200);}else{notice.error(data.message);}}).fail(function(data){notice.error(data.message);});}else{notice.warning('请选择角色权限');}};return Grant;}();exports('@backend.grant',new Grant());});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdyYW50LnZ1ZSJdLCJuYW1lcyI6WyJsYXl1aSIsImRlZmluZSIsImV4cG9ydHMiLCIkIiwianF1ZXJ5IiwibGF5ZXIiLCJ0YWJsZSIsImFkbWluIiwibm90aWNlIiwiR3JhbnQiLCJpbml0Iiwic2VsUmlkIiwiZGF0YSIsImdyYW50TGlzdFRhYmxlIiwicmVuZGVyIiwiaWQiLCJ1cmwiLCJ3aGVyZSIsInJpZCIsInRyZWVEZWZhdWx0Q2xvc2UiLCJ0cmVlTGlua2FnZSIsImVsZW0iLCJkZWZhdWx0VG9vbGJhciIsImNlbGxNaW5XaWR0aCIsInBhZ2UiLCJjb2xzIiwiZmllbGQiLCJ0aXRsZSIsIndpZHRoIiwic29ydCIsInRlbXBsZXQiLCJkIiwic3BhY2UiLCJsZXZlbCIsIm5hbWUiLCJodG1sIiwib3AiLCJ0b3BSZXNJZCIsIm9wcyIsInJlc0lkIiwiZG9uZSIsImUiLCJjaGVja2JveCIsInNpYmxpbmdzIiwiY3NzIiwiY2hpbGRyZW4iLCJzYXZlIiwib2JqIiwiZ3JhbnQiLCJlYWNoIiwibmV4dCIsImhhc0NsYXNzIiwicHVzaCIsInZhbCIsImxlbmd0aCIsImxvYWRJbmRleCIsImxvYWQiLCJwb3N0IiwidGhlbiIsImNsb3NlIiwiY29kZSIsInN1Y2Nlc3MiLCJzZXRUaW1lb3V0IiwiY2xvc2VUaGlzVGFicyIsImVycm9yIiwibWVzc2FnZSIsImZhaWwiLCJ3YXJuaW5nIl0sIm1hcHBpbmdzIjoic0xBQUFBLEtBQUssQ0FBQ0MsTUFBTixDQUFhLENBQUMsT0FBRCxDQUFVLE9BQVYsQ0FBbUIsTUFBbkIsQ0FBMkIsT0FBM0IsQ0FBb0MsUUFBcEMsQ0FBYixDQUE0RCxTQUFVQyxPQUFWLENBQW1CLENBQzdFLEdBQUlDLENBQUFBLENBQUMsQ0FBUUgsS0FBSyxDQUFDSSxNQUFuQixDQUNBLEdBQUlDLENBQUFBLEtBQUssQ0FBSUwsS0FBSyxDQUFDSyxLQUFuQixDQUNBLEdBQUlDLENBQUFBLEtBQUssQ0FBSU4sS0FBSyxDQUFDTSxLQUFuQixDQUNBLEdB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Q0x2RCxNQUFNLENBQUN3RCxLQUFQLENBQWFwRCxJQUFJLENBQUNxRCxPQUFsQixFQUNELENBQ0YsQ0FWRCxFQVVHQyxJQVZILENBVVEsU0FBVXRELElBQVYsQ0FBZ0IsQ0FDdEJKLE1BQU0sQ0FBQ3dELEtBQVAsQ0FBYXBELElBQUksQ0FBQ3FELE9BQWxCLEVBQ0QsQ0FaRCxFQWFELENBZkQsSUFlTyxDQUNMekQsTUFBTSxDQUFDMkQsT0FBUCxDQUFlLFNBQWYsRUFDRCxDQUVGLENBdEYwRSxrQkF5RjdFakUsT0FBTyxDQUFDLGdCQUFELENBQW1CLEdBQUlPLENBQUFBLEtBQUosRUFBbkIsQ0FBUCxDQUNELENBMUZEIiwic291cmNlc0NvbnRlbnQiOlsibGF5dWkuZGVmaW5lKFsnbGF5ZXInLCAndGFibGUnLCAndXRpbCcsICdhZG1pbicsICdub3RpY2UnXSwgZnVuY3Rpb24gKGV4cG9ydHMpIHtcbiAgbGV0ICQgICAgICA9IGxheXVpLmpxdWVyeTtcbiAgbGV0IGxheWVyICA9IGxheXVpLmxheWVyO1xuICBsZXQgdGFibGUgID0gbGF5dWkudGFibGU7XG4gIGxldCBhZG1pbiAgPSBsYXl1aS5hZG1pbjtcbiAgbGV0IG5vdGljZSA9IGxheXVpLm5vdGljZTtcblxuICBjbGFzcyBHcmFudCB7XG4gICAgZ3JhbnRMaXN0VGFibGVcbiAgICBpbnNYbVNlbFxuICAgIHNlbFJpZFxuXG4gICAgaW5pdCgpIHtcbiAgICAgIHRoaXMuc2VsUmlkICAgICAgICAgPSAkKCcjc2F2ZUJ0bicpLmRhdGEoJ3JpZCcpXG4gICAgICB0aGlzLmdyYW50TGlzdFRhYmxlID0gdGFibGUucmVuZGVyKHtcbiAgICAgICAgaWQgICAgICAgICAgICAgIDogJ2dyYW50TGlzdCcsXG4gICAgICAgIHVybCAgICAgICAgICAgICA6IGFkbWluLnVybCgnYmFja2VuZC9yb2xlL2dyYW50LWxpc3QnKSxcbiAgICAgICAgd2hlcmUgICAgICAgICAgIDoge3JpZDogdGhpcy5zZWxSaWR9LFxuICAgICAgICB0cmVlRGVmYXVsdENsb3NlOiBmYWxzZSxcbiAgICAgICAgdHJlZUxpbmthZ2UgICAgIDogZmFsc2UsXG4gICAgICAgIGVsZW0gICAgICAgICAgICA6ICcjZ3JhbnRUYWJsZScsXG4gICAgICAgIGRlZmF1bHRUb29sYmFyICA6IFtdLFxuICAgICAgICBjZWxsTWluV2lkdGggICAgOiAxMDAsXG4gICAgICAgIHBhZ2UgICAgICAgICAgICA6IGZhbHNlLFxuICAgICAgICBjb2xzICAgICAgICAgICAgOiBbW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGZpZWxkOiAnbmFtZScsIHRpdGxlOiAn5ZCN56ewJywgd2lkdGg6IDE4MCwgc29ydDogZmFsc2UsIHRlbXBsZXQ6IChkKSA9PiB7XG4gICAgICAgICAgICAgIGxldCBzcGFjZSA9IFsnJywgJyZlbXNwOycsICcmZW1zcDsmZW1zcDsnXVxuICAgICAgICAgICAgICByZXR1cm4gc3BhY2VbZC5sZXZlbF0gKyBkLm5hbWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGZpZWxkOiAnb3AnLCB0aXRsZTogJ+adg+mZkCcsIHNvcnQ6IGZhbHNlLCB0ZW1wbGV0OiAoZCkgPT4ge1xuICAgICAgICAgICAgICBsZXQgaHRtbCA9ICcnO1xuICAgICAgICAgICAgICBsZXQgb3A7XG4gICAgICAgICAgICAgIGxldCB0b3BSZXNJZDtcbiAgICAgICAgICAgICAgZm9yIChvcCBpbiBkLm9wcykge1xuICAgICAgICAgICAgICAgIGxldCByZXNJZCA9IGQub3BzW29wXVsncmVzSWQnXVxuICAgICAgICAgICAgICAgIGlmIChvcCA9PT0gJ3InKSB7XG4gICAgICAgICAgICAgICAgICB0b3BSZXNJZCA9IHJlc0lkXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxpbnB1dCBkYXRhLWxldmVsPVwiJyArIGQubGV2ZWwgKyAnXCIgY2xhc3M9XCJhdXRoQ2hlY2tib3ggJyArIHRvcFJlc0lkICsgJ1wiICcgKyBkLm9wc1tvcF1bJ2NoZWNrYm94J10gKyAnIHR5cGU9XCJjaGVja2JveFwiIHRpdGxlPScgKyBkLm9wc1tvcF1bJ25hbWUnXSArICcgbmFtZT1cImdyYW50XCIgdmFsdWU9XCInICsgcmVzSWQgKyAnXCIgPiAmbmJzcDsnXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmV0dXJuIGh0bWxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIF1dLFxuICAgICAgICBkb25lICAgICAgICAgICAgOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIGxldCBjaGVja2JveCA9ICQoJy5hdXRoQ2hlY2tib3gnKS5zaWJsaW5ncygnZGl2LmxheXVpLWZvcm0tY2hlY2tib3gnKVxuICAgICAgICAgIGNoZWNrYm94LmNzcygnaGVpZ2h0JywgJzI0cHgnKVxuICAgICAgICAgIGNoZWNrYm94LmNzcygnbGluZS1oZWlnaHQnLCAnMjRweCcpXG4gICAgICAgICAgY2hlY2tib3guY2hpbGRyZW4oJ3NwYW4nKS5jc3MoJ2ZvbnQtc2l6ZScsICcxMnB4Jyk7XG4gICAgICAgICAgY2hlY2tib3guY2hpbGRyZW4oJ3NwYW4nKS5jc3MoJ3BhZGRpbmcnLCAnMCA2cHgnKTtcbiAgICAgICAgICBjaGVja2JveC5jaGlsZHJlbignaScpLmNzcygnaGVpZ2h0JywgJzI0cHgnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8v5L+d5a2YXG4gICAgc2F2ZSgpIHtcbiAgICAgIGxldCBvYmogICA9ICQoJy5hdXRoQ2hlY2tib3gnKVxuICAgICAgbGV0IGdyYW50ID0gW11cbiAgICAgIG9iai5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCQodGhpcykubmV4dCgnZGl2LmxheXVpLWZvcm0tY2hlY2tib3gnKS5oYXNDbGFzcygnbGF5dWktZm9ybS1jaGVja2VkJykpIHtcbiAgICAgICAgICBncmFudC5wdXNoKCQodGhpcykudmFsKCkpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBpZiAoZ3JhbnQubGVuZ3RoID4gMCkge1xuICAgICAgICBsZXQgbG9hZEluZGV4ID0gbGF5ZXIubG9hZCgyKTtcbiAgICAgICAgYWRtaW4ucG9zdChhZG1pbi51cmwoJ2JhY2tlbmQvcm9sZS9ncmFudC1zYXZlJyksIHsncmlkJzogdGhpcy5zZWxSaWQsICdncmFudHMnOiBncmFudH0pLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICBsYXllci5jbG9zZShsb2FkSW5kZXgpO1xuICAgICAgICAgIGlmIChkYXRhLmNvZGUgPT09IDIwMCkge1xuICAgICAgICAgICAgbm90aWNlLnN1Y2Nlc3MoJ+S/neWtmOaIkOWKnycpO1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKT0+e1xuICAgICAgICAgICAgICBhZG1pbi5jbG9zZVRoaXNUYWJzKClcbiAgICAgICAgICAgIH0sMjIwMClcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbm90aWNlLmVycm9yKGRhdGEubWVzc2FnZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KS5mYWlsKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgbm90aWNlLmVycm9yKGRhdGEubWVzc2FnZSk7XG4gICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBub3RpY2Uud2FybmluZygn6K+36YCJ5oup6KeS6Imy5p2D6ZmQJyk7XG4gICAgICB9XG5cbiAgICB9XG4gIH1cblxuICBleHBvcnRzKCdAYmFja2VuZC5ncmFudCcsIG5ldyBHcmFudCk7XG59KSJdLCJmaWxlIjoiZ3JhbnQuanMifQ==
