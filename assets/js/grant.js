/** wulacms-v3.0.0 MIT License By https://github.com/ninggf/wulacms */
 ;function _defineProperty(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}layui.define(["layer","table","util","admin","notice"],function(e){var n=layui.jquery,a=layui.layer,t=layui.table,r=layui.admin,s=layui.notice,l=new(function(){function e(){_defineProperty(this,"grantListTable",void 0),_defineProperty(this,"insXmSel",void 0),_defineProperty(this,"selRid",void 0)}var i=e.prototype;return i.init=function(){this.selRid=n("#saveBtn").data("rid"),this.grantListTable=t.render({id:"grantList",url:r.url("backend/role/grant-list"),where:{rid:this.selRid},treeDefaultClose:!1,treeLinkage:!1,elem:"#grantTable",defaultToolbar:[],cellMinWidth:100,page:!1,cols:[[{field:"name",title:"",width:180,sort:!1,templet:function(e){return["","&emsp;","&emsp;&emsp;"][e.level]+e.name}},{field:"op",title:_t("Permissions"),sort:!1,templet:function(e){var i,t,n="";for(i in e.ops){var a=e.ops[i].resId;"r"===i&&(t=a),n+='<input data-level="'+e.level+'" class="authCheckbox '+t+'" '+e.ops[i].checkbox+' type="checkbox" title='+e.ops[i].name+' name="grant" value="'+a+'" > &nbsp;'}return n}}]],done:function(e){var i=n(".authCheckbox").siblings("div.layui-form-checkbox");i.css("height","24px"),i.css("line-height","24px"),i.children("span").css("font-size","12px"),i.children("span").css("padding","0 6px"),i.children("i").css("height","24px"),n(".grantBtn").click(function(){l.save()})}})},i.save=function(){var e=n(".authCheckbox"),i=[];e.each(function(){n(this).next("div.layui-form-checkbox").hasClass("layui-form-checked")&&i.push(n(this).val())});var t=a.load(2);r.post(r.url("backend/role/grant-save"),{rid:this.selRid,grants:i}).then(function(e){a.close(t),200===e.code?s.success("授权成功！"):s.error(e.message)}).fail(function(e){s.error(e.message)})},e}());e("@backend.grant",l)});