/** wulacms-v3.0.0 MIT License By https://github.com/ninggf/wulacms */
 ;layui.define("layer",function(e){"use strict";function s(e,t,a){var i=e.data("ajaxCnt");0<i&&e.data("ajaxCnt",i-1),e.data("verified",t),0===e.data("ajaxCnt")&&(e.removeAttr("lay-verifying"),y.hideLoading(e),(a||e.data("autoSubmit"))&&1===t&&a.submit(),1!==t&&y.showErrors(null,[{elem:e,error:t}]))}var k=layui.$,f=layui.layer,n=layui.hint(),b=(layui.device(),"form"),o=".layui-form",C="layui-this",w="layui-hide",T="layui-disabled",t=function(){this.config={verify:{required:[/[\S]+/,"必填项不能为空"],phone:[/^1\d{10}$/,"请输入正确的手机号"],email:[/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,"邮箱格式不正确"],url:[/(^#)|(^http(s*):\/\/[^\s]+\.[^\s]+)/,"链接格式不正确"],number:function(e){if(!e||isNaN(e))return"只能填写数字"},date:[/^(\d{4})[-\/](\d{1}|0\d{1}|1[0-2])([-\/](\d{1}|0\d{1}|[1-2][0-9]|3[0-1]))*$/,"日期格式不正确"],identity:[/(^\d{15}$)|(^\d{17}(x|X|\d)$)/,"请输入正确的身份证号"],checked:function(e,t){if("checkbox"===t.type&&!k(t).prop("checked"))return k(t).attr("lay-errText")||"请勾选此项"},ajax:function(e,t,a){var i=k(t),n=i.data("url"),l=i.data("rValue"),r=i.data("ajaxCnt")||0,t=i.data("verified");if(n&&l!==e)if(a&&"pending"===i.attr("lay-verifying"))i.data("autoSubmit",!0);else if("0"===t){i.data("autoSubmit",!1),0===r&&y.showLoading(i),i.data("ajaxCnt",r+1).attr("lay-verifying","pending");r=k.Event("ajax_verify"),e={value:e};i.trigger(r),r.result&&(e=k.extend({},r.result,e)),k.get(n,e,"json").then(function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(e){t={code:500,message:"error response"}}t&&200===t.code?s(i,1,a):t&&t.message?s(i,t.message,a):s(i,"error response",a)}).fail(function(e){var t=e.responseJSON||{message:e.responseText||e.statusText};t.message||(t.message=e.statusText),s(i,t.message,a)})}else if(1!==t)return t}}}};t.prototype.set=function(e){return k.extend(!0,this.config,e),this},t.prototype.verify=function(e){return k.extend(!0,this.config.verify,e),this},t.prototype.showErrors=function(e,t){layui.each(t,function(e,t){var a=t.elem,i=a.get(0),n=a.closest("div.layui-form-item"),l=n.find("p.layui-error-msg"),r=a.attr("lay-verType"),t=t.error;a.addClass("layui-form-danger"),"tips"===r?f.tips(t,"string"==typeof a.attr("lay-ignore")||"select"!==i.tagName.toLowerCase()&&!/^checkbox|radio$/.test(i.type)?a:a.next(),{tips:1}):"alert"===r?f.alert(t,{title:"提示",shadeClose:!0}):0<l.length?l.show():(l=k('<p class="layui-error-msg">'+t+"</p>")).appendTo(n)})},t.prototype.hideErrors=function(e,t){(t?k(t).closest("div.layui-form-item"):e).find("p.layui-error-msg").hide()},t.prototype.showLoading=function(e){var t=e.closest("div.layui-form-item"),e=t.find("div.layui-verifying");0<e.length?e.show():(e=k('<div class="layui-verifying text-center"><i class="layui-icon layui-icon-loading layui-anim layui-anim-rotate layui-anim-loop"></i></div>')).appendTo(t)},t.prototype.hideLoading=function(e){e.closest("div.layui-form-item").find("div.layui-verifying").hide()},t.prototype.on=function(e,t){return layui.onevent.call(this,b,e,t)},t.prototype.val=function(e,a){return k(o+'[lay-filter="'+e+'"]').each(function(e,t){var i=k(this);layui.each(a,function(e,t){var a=i.find('[name="'+e+'"]');a[0]&&("checkbox"===(e=a[0].type)?a[0].checked=t:"radio"===e?a.each(function(){this.value==t&&(this.checked=!0)}):a.val(t))})}),y.render(null,e),this.getValue(e)},t.prototype.getValue=function(e,t){t=t||k(o+'[lay-filter="'+e+'"]').eq(0);var i={},n={},t=t.find("input,select,textarea");return layui.each(t,function(e,t){var a;t.name=(t.name||"").replace(/^\s*|\s*&/,""),t.name&&(/^.*\[\]$/.test(t.name)&&(a=t.name.match(/^(.*)\[\]$/g)[0],i[a]=0|i[a],t.name=t.name.replace(/^(.*)\[\]$/,"$1["+i[a]+++"]")),/^checkbox|radio$/.test(t.type)&&!t.checked||(n[t.name]=t.value))}),n},t.prototype.render=function(e,t){var a,i=k(o+(t?'[lay-filter="'+t+'"]':"")),t={select:function(){function h(e,t){k(e.target).parent().hasClass(m)&&!t||(k("."+p).removeClass(p+"ed "+p+"up"),v&&x&&v.val(x)),v=null}function c(i,e,t){var s,a,n,o,l,r=k(this),c=i.find("."+m),u=c.find("input"),d=i.find("dl"),f=d.children("dd"),y=this.selectedIndex;e||(a=function(){var e=i.offset().top+i.outerHeight()+5-$.scrollTop(),t=d.outerHeight();y=r[0].selectedIndex,i.addClass(p+"ed"),f.removeClass(w),s=null,f.eq(y).addClass(C).siblings().removeClass(C),e+t>$.height()&&t<=e&&i.addClass(p+"up"),o()},n=function(e){i.removeClass(p+"ed "+p+"up"),u.blur(),s=null,e||l(u.val(),function(e){var t=r[0].selectedIndex;e&&(x=k(r[0].options[t]).html(),0===t&&x===u.attr("placeholder")&&(x=""),u.val(x||""))})},o=function(){var e,t,a=d.children("dd."+C);a[0]&&(e=a.position().top,t=d.height(),a=a.height(),t<e&&d.scrollTop(e+d.scrollTop()-t+a-5),e<0&&d.scrollTop(e+d.scrollTop()-5))},c.on("click",function(e){i.hasClass(p+"ed")?n():(h(e,!0),a()),d.find("."+g).remove()}),c.find(".layui-edge").on("click",function(){u.focus()}),u.on("keyup",function(e){9===e.keyCode&&a()}).on("keydown",function(l){var e=l.keyCode;9===e&&n();function r(i,n){l.preventDefault();var e=function(){var e=d.children("dd."+C);if(d.children("dd."+w)[0]&&"next"===i){var t=d.children("dd:not(."+w+",."+T+")"),a=t.eq(0).index();if(0<=a&&a<e.index()&&!t.hasClass(C))return t.eq(0).prev()[0]?t.eq(0).prev():d.children(":last")}return n&&n[0]?n:s&&s[0]?s:e}(),t=e[i](),a=e[i]("dd:not(."+w+")");return t[0]?(s=e[i](),a[0]&&!a.hasClass(T)||!s[0]?(a.addClass(C).siblings().removeClass(C),void o()):r(i,s)):s=null}38===e&&r("prev"),40===e&&r("next"),13===e&&(l.preventDefault(),d.children("dd."+C).trigger("click"))}),l=function(i,e,n){var l=0;layui.each(f,function(){var e=k(this),t=e.text(),a=-1===t.indexOf(i);(""===i||"blur"===n?i!==t:a)&&l++,"keyup"===n&&e[a?"addClass":"removeClass"](w)});var t=l===f.length;return e(t),t},t&&u.on("keyup",function(e){var t=this.value,e=e.keyCode;if(9===e||13===e||37===e||38===e||39===e||40===e)return!1;l(t,function(e){e?d.find("."+g)[0]||d.append('<p class="'+g+'">无匹配项</p>'):d.find("."+g).remove()},"keyup"),""===t&&d.find("."+g).remove(),o()}).on("blur",function(e){var t=r[0].selectedIndex;v=u,x=k(r[0].options[t]).html(),0===t&&x===u.attr("placeholder")&&(x=""),setTimeout(function(){l(u.val(),function(e){x||u.val("")},"blur")},200)}),f.on("click",function(){var e=k(this),t=e.attr("lay-value"),a=r.attr("lay-filter");return e.hasClass(T)||(e.hasClass("layui-select-tips")?u.val(""):(u.val(e.text()),e.addClass(C)),e.siblings().removeClass(C),r.val(t).removeClass("layui-form-danger"),layui.event.call(this,b,"select("+a+")",{elem:r[0],value:t,othis:i}),n(!0)),!1}),i.find("dl>dt").on("click",function(e){return!1}),k(document).off("click",h).on("click",h))}var v,u="请选择",p="layui-form-select",m="layui-select-title",g="layui-select-none",x="",e=i.find("select");e.each(function(e,t){var a=k(this),i=a.next("."+p),n=this.disabled,l=t.value,r=k(t.options[t.selectedIndex]),s=t.options[0];if("string"==typeof a.attr("lay-ignore"))return a.show();var o,t="string"==typeof a.attr("lay-search"),s=s&&!s.value&&s.innerHTML||u,r=k(['<div class="'+(t?"":"layui-unselect ")+p,(n?" layui-select-disabled":"")+'">','<div class="'+m+'">','<input type="text" placeholder="'+s+'" value="'+(l?r.html():"")+'"'+(!n&&t?"":" readonly")+' class="layui-input'+(t?"":" layui-unselect")+(n?" "+T:"")+'">','<i class="layui-edge"></i></div>','<dl class="layui-anim layui-anim-upbit'+(a.find("optgroup")[0]?" layui-select-group":"")+'">',(r=a.find("*"),o=[],layui.each(r,function(e,t){0!==e||t.value?"optgroup"===t.tagName.toLowerCase()?o.push("<dt>"+t.label+"</dt>"):o.push('<dd lay-value="'+t.value+'" class="'+(l===t.value?C:"")+(t.disabled?" "+T:"")+'">'+t.innerHTML+"</dd>"):o.push('<dd lay-value="" class="layui-select-tips">'+(t.innerHTML||u)+"</dd>")}),0===o.length&&o.push('<dd lay-value="" class="'+T+'">没有选项</dd>'),o.join("")+"</dl>"),"</div>"].join(""));i[0]&&i.remove(),a.after(r),c.call(this,r,n,t)})},checkbox:function(){var o={checkbox:["layui-form-checkbox","layui-form-checked","checkbox"],_switch:["layui-form-switch","layui-form-onswitch","switch"]},e=i.find("input[type=checkbox]");e.each(function(e,t){var a=k(this),i=a.attr("lay-skin"),n=(a.attr("lay-text")||"").split("|"),l=this.disabled;"switch"===i&&(i="_"+i);var r=o[i]||o.checkbox;if("string"==typeof a.attr("lay-ignore"))return a.show();var s=a.next("."+r[0]),n=k(['<div class="layui-unselect '+r[0],t.checked?" "+r[1]:"",l?" layui-checkbox-disbaled "+T:"",'"',i?' lay-skin="'+i+'"':"",">",(n={checkbox:[t.title.replace(/\s/g,"")?"<span>"+t.title+"</span>":"",'<i class="layui-icon layui-icon-ok"></i>'].join(""),_switch:"<em>"+((t.checked?n[0]:n[1])||"")+"</em><i></i>"})[i]||n.checkbox,"</div>"].join(""));s[0]&&s.remove(),a.after(n),function(a,i){var n=k(this);a.on("click",function(){var e=n.attr("lay-filter"),t=(n.attr("lay-text")||"").split("|");n[0].disabled||(n[0].checked?(n[0].checked=!1,a.removeClass(i[1]).find("em").text(t[1])):(n[0].checked=!0,a.addClass(i[1]).find("em").text(t[0])),layui.event.call(n[0],b,i[2]+"("+e+")",{elem:n[0],value:n[0].value,othis:a}))})}.call(this,n,r)})},radio:function(){var r="layui-form-radio",s=["&#xe643;","&#xe63f;"],e=i.find("input[type=radio]");e.each(function(e,t){var a=k(this),i=a.next("."+r),n=this.disabled;if("string"==typeof a.attr("lay-ignore"))return a.show();i[0]&&i.remove();t=k(['<div class="layui-unselect '+r,t.checked?" "+r+"ed":"",(n?" layui-radio-disbaled "+T:"")+'">','<i class="layui-anim layui-icon">'+s[t.checked?0:1]+"</i>","<div>"+(t=t.title||"","string"==typeof a.next().attr("lay-radio")&&(t=a.next().html(),a.next().remove()),t)+"</div>","</div>"].join(""));a.after(t),function(i){var n=k(this),l="layui-anim-scaleSpring";i.on("click",function(){var e=n[0].name,t=n.parents(o),a=n.attr("lay-filter"),e=t.find("input[name="+e.replace(/(\.|#|\[|\])/g,"\\$1")+"]");n[0].disabled||(layui.each(e,function(){var e=k(this).next("."+r);this.checked=!1,e.removeClass(r+"ed"),e.find(".layui-icon").removeClass(l).html(s[1])}),n[0].checked=!0,i.addClass(r+"ed"),i.find(".layui-icon").addClass(l).html(s[0]),layui.event.call(n[0],b,"radio("+a+")",{elem:n[0],value:n[0].value,othis:i}))})}.call(this,t)})}};return e?t[e]?t[e]():n.error("不支持的"+e+"表单渲染"):layui.each(t,function(e,t){t()}),e||(a="",e=i.find("input,select,textarea"),layui.each(e,function(e,t){t.name=(t.name||"").replace(/^\s*|\s*&/,""),t.name&&(a=/^checkbox|radio$/.test(t.type)&&!t.checked?"":t.value,k(t).data("rValue",a))})),this};function l(n,l){var r=!1,s=y.config.verify,e=n.attr("lay-verify").split("|"),o=n.attr("lay-verType"),c=n.val(),u=n.get(0),d=!!l,l=l||k(n.parents("form")[0]);return layui.each(e,function(e,t){var a="",i="function"==typeof s[t];if(!r&&s[t]&&(i=i?a=s[t](c,u,d&&l):!s[t][0].test(c),a=a||s[t][1],"required"===t&&(a=n.attr("lay-reqText")||a),i))return"tips"===o?f.tips(a,"string"==typeof n.attr("lay-ignore")||"select"!==u.tagName.toLowerCase()&&!/^checkbox|radio$/.test(u.type)?n:n.next(),{tips:1}):"alert"===o?f.alert(a,{title:"提示",shadeClose:!0}):/\bstring|number\b/.test(typeof a)&&y.showErrors(l,[{elem:n,error:a}]),r=!0}),r||(n.removeClass("layui-form-danger"),y.hideErrors(l,n)),r}function a(){var a=null,e=(n=k(this)).parents(o),t=e.find("*[lay-verify]"),i=n.parents("form")[0],n=n.attr("lay-filter");return layui.each(t,function(e,t){if(a=l(k(t),k(i)))return a}),!a&&(!(0<k(i).find("*[lay-verifying]").length)&&(e=y.getValue(null,e),layui.event.call(this,b,"submit("+n+")",{elem:this,form:i,field:e})))}var y=new t,t=k(document),$=k(window);y.render(),t.on("reset",o,function(){var e=k(this),t=e.attr("lay-filter");setTimeout(function(){y.render(null,t),layui.event.call(this,b,"reset("+t+")",{elem:this,form:e,field:y.getValue(null,e)})},50)}),t.on("submit",o,a).on("click","*[lay-submit]",a),t.on("change","*[lay-verify]",function(){l(k(this).data("verified","0"))}),e(b,y)});